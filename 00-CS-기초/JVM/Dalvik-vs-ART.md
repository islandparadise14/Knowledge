---
tags: [cs, jvm, dalvik, art, android]
---

# Dalvik vs ART

## π’΅ ν•µμ‹¬ κ°λ…

**Dalvik**κ³Ό **ART**(Android Runtime)λ” Androidμ—μ„ DEX λ°”μ΄νΈμ½”λ“λ¥Ό μ‹¤ν–‰ν•λ” λ°νƒ€μ„μ΄λ‹¤. Dalvikμ€ Android 4.4κΉμ§€ μ‚¬μ©λμ—κ³ , Android 5.0λ¶€ν„° ARTλ΅ μ™„μ „ν κµμ²΄λμ—λ‹¤. κ°€μ¥ ν° μ°¨μ΄λ” Dalvikμ€ **JIT**(μ‹¤ν–‰ μ¤‘ μ»΄νμΌ), ARTλ” **AOT + JIT νΌν•©**(μ„¤μΉ/μ ν΄ μ‹ λ―Έλ¦¬ μ»΄νμΌ)μ΄λΌλ” μ μ΄λ‹¤.

## π“ μ™ ν•„μ”ν•κ°€?

Android μ•±μ μ‹¤ν–‰ μ„±λ¥, μ„¤μΉ μ‹κ°„, λ°°ν„°λ¦¬ μ†λ¨, λ©”λ¨λ¦¬ μ‚¬μ©λ‰μ΄ λ¨λ‘ λ°νƒ€μ„μ— μν•΄ κ²°μ •λλ‹¤. λ©΄μ ‘μ—μ„λ„ μμ£Ό λ‚μ¤λ” μ£Όμ μ΄λ©°, μ•± μ„±λ¥ μµμ ν™”μ κΈ°λ° μ§€μ‹μ΄λ‹¤.

## π” μμ„Έν

### λΉ„κµ ν‘

| | Dalvik | ART |
|---|---|---|
| **μ»΄νμΌ λ°©μ‹** | JIT (μ‹¤ν–‰ μ‹ μ»΄νμΌ) | AOT + JIT + μΈν„°ν”„λ¦¬ν„° νΌν•© |
| **μ•± μ„¤μΉ μ†λ„** | λΉ λ¦„ | Android 7+ λΉ λ¦„ (AOT μ§€μ—°) |
| **μ•± μ‹¤ν–‰ μ†λ„** | λλ¦Ό (λ§¤λ² JIT) | λΉ λ¦„ (λ―Έλ¦¬ μ»΄νμΌλ¨) |
| **μ €μ¥ κ³µκ°„** | μ μ | AOT κ²°κ³Όλ¬Ό μ €μ¥ ν•„μ” |
| **GC** | Stop-the-World μ„μ£Ό | **Concurrent GC** |
| **64λΉ„νΈ** | λ―Έμ§€μ› | μ§€μ› |
| **Android λ²„μ „** | ~4.4 | 5.0+ (κΈ°λ³Έ) |

### Dalvik λ™μ‘ λ°©μ‹

```
μ•± μ„¤μΉ: .apk β†’ DEX μ¶”μ¶λ§
μ•± μ‹¤ν–‰:
  DEX λ°”μ΄νΈμ½”λ“
       β”‚
       β–Ό
  [μΈν„°ν”„λ¦¬ν„°] β†’ ν• μ¤„μ”© μ‹¤ν–‰ (λλ¦Ό)
       β”‚
  ν•« μ½”λ“ κ°μ§€
       β”‚
       β–Ό
  [JIT μ»΄νμΌ] β†’ λ„¤μ΄ν‹°λΈ μ½”λ“ (λ©”λ¨λ¦¬μ—λ§ μΊμ‹)
       β”‚
  μ•± μΆ…λ£ μ‹ JIT κ²°κ³Ό μ‚¬λΌμ§ β†’ λ‹¤μμ— λ‹¤μ‹ μ»΄νμΌ
```

### ART λ™μ‘ λ°©μ‹ (Android 7.0+)

```
μ•± μ„¤μΉ: DEXλ§ μ €μ¥ (λΉ λ¥Έ μ„¤μΉ)
       β”‚
μ²« μ‹¤ν–‰: μΈν„°ν”„λ¦¬ν„° + JIT
       β”‚  β””β”€ ν”„λ΅νμΌ μμ§‘ (.prof)
       β”‚
μ ν΄+μ¶©μ „ μ¤‘: ν”„λ΅νμΌ κΈ°λ° AOT μ»΄νμΌ
       β”‚  β””β”€ μμ£Ό μ“°λ” μ½”λ“λ§ μ„ λ³„ β†’ .odex / .art μƒμ„±
       β”‚
λ‹¤μ μ‹¤ν–‰: AOT μ½”λ“ μ§μ ‘ μ‹¤ν–‰ (λΉ λ¦„)
       β””β”€ AOT μ• λ μ½”λ“λ” JIT or μΈν„°ν”„λ¦¬ν„°
```

### GC μ°¨μ΄

```
Dalvik GC:
β”β”€β”€ GC μ‹ μ•± μ „μ²΄ μΌμ‹ μ •μ§€ (Stop-the-World)
β”β”€β”€ μ •μ§€ μ‹κ°„: 50~100ms (UI jank μ λ°)
β””β”€β”€ ν™ λ‹¨νΈν™” λ¬Έμ 

ART GC:
β”β”€β”€ Concurrent Mark-Sweep: μ•±κ³Ό λ™μ‹μ— GC
β”β”€β”€ μ •μ§€ μ‹κ°„: λ³΄ν†µ < 5ms
β”β”€β”€ Concurrent Copying (Android 10+): ν™ μ••μ¶•λ„ λ™μ‹μ—
β””β”€β”€ λ©”λ¨λ¦¬ λ‹¨νΈν™” ν•΄κ²°
```

### λ μ§€μ¤ν„° κΈ°λ° vs μ¤νƒ κΈ°λ°

```
ν‘μ¤€ JVM (μ¤νƒ κΈ°λ°):
  push a      // μ¤νƒμ— a λ„£κΈ°
  push b      // μ¤νƒμ— b λ„£κΈ°
  add         // μ¤νƒμ—μ„ κΊΌλ‚΄ λ”ν•κΈ°
  store c     // κ²°κ³Ό μ €μ¥
  β†’ λ…λ Ήμ–΄ 4κ°

Dalvik/ART (λ μ§€μ¤ν„° κΈ°λ°):
  add c, a, b  // λ μ§€μ¤ν„°μ—μ„ λ°”λ΅ μ—°μ‚°
  β†’ λ…λ Ήμ–΄ 1κ° (λ…λ Ήμ–΄ μ μ κ³ , λ©”λ¨λ¦¬ μ ‘κ·Ό μ μ)
```

### μ‹¤μ  μν–¥

```kotlin
// ARTμ μ΄μ μΌλ΅ κ°€λ¥ν•΄μ§„ κ²ƒλ“¤:
// 1. λ” λ³µμ΅ν• μ•±λ„ λ¶€λ“λ½κ² μ‹¤ν–‰
// 2. GC pauseκ°€ μ§§μ•„μ Έ 60fps μ μ§€ μ©μ΄
// 3. 64λΉ„νΈ μ§€μ›μΌλ΅ ν° λ©”λ¨λ¦¬ μ£Όμ† κ³µκ°„

// κ°λ°μκ°€ μ‹ κ²½ μ¨μ•Ό ν•  κ²ƒ:
// - ProGuard/R8λ΅ μ½”λ“ μµμ ν™” β†’ AOT ν¨μ¨ ν–¥μƒ
// - Baseline Profile μ κ³µ β†’ μ½λ“ μ¤νƒ€νΈ κ°μ„ 
// - λ©”λ¨λ¦¬ λ¦­ λ°©μ§€ β†’ GC λ¶€ν• κ°μ†
```

## π”— κ΄€λ ¨ κ°λ…

- [[00-CS-κΈ°μ΄/JVM/JVM-κµ¬μ΅°|JVM κµ¬μ΅°]]
- [[00-CS-κΈ°μ΄/JVM/JIT-μ»΄νμΌ|JIT μ»΄νμΌ]]
- [[00-CS-κΈ°μ΄/JVM/DEX-νμΌ|DEX νμΌ]]
- [[00-CS-κΈ°μ΄/JVM/GC-κ°€λΉ„μ§€-μ»¬λ ‰μ…|GC κ°€λΉ„μ§€ μ»¬λ ‰μ…]]

## π“ λ” λ³΄κΈ°

- [ART and Dalvik](https://source.android.com/docs/core/runtime)
- [ART Improvements](https://developer.android.com/about/versions/14/behavior-changes-all)

---

**ν•µμ‹¬ μ”μ•½:** Dalvikμ€ JITλ§ μ‚¬μ©ν•΄ λ§¤λ² λλ¦¬κ² μ‹μ‘ν–κ³  GCκ°€ μ•±μ„ λ©μ·„λ‹¤. ARTλ” AOT+JIT νΌν•©κ³Ό Concurrent GCλ΅ μ‹¤ν–‰ μ†λ„μ™€ UI λ¶€λ“λ¬μ›€μ„ ν¬κ² κ°μ„ ν–λ‹¤.
