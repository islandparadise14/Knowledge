---
tags: [CS, ë°ì´í„°ë² ì´ìŠ¤, ì •ê·œí™”, ì„¤ê³„, Room]
---

# ì •ê·œí™”

## ğŸ’¡ í•µì‹¬ ê°œë…

ì •ê·œí™”(Normalization)ëŠ” ë°ì´í„° ì¤‘ë³µì„ ìµœì†Œí™”í•˜ê³  ë¬´ê²°ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ í…Œì´ë¸”ì„ ë¶„ë¦¬í•˜ëŠ” ì„¤ê³„ ê¸°ë²•ì´ë‹¤. ì‚½ì…/ìˆ˜ì •/ì‚­ì œ ì´ìƒ(Anomaly)ì„ ë°©ì§€í•˜ëŠ” ê²ƒì´ ëª©ì ì´ë©°, 1NFë¶€í„° 5NFê¹Œì§€ ë‹¨ê³„ê°€ ìˆì§€ë§Œ ì‹¤ë¬´ì—ì„œëŠ” ë³´í†µ 3NF ë˜ëŠ” BCNFê¹Œì§€ ì ìš©í•œë‹¤. ëª¨ë°”ì¼ í™˜ê²½ì—ì„œëŠ” ì„±ëŠ¥ì„ ìœ„í•´ ì˜ë„ì ìœ¼ë¡œ ë¹„ì •ê·œí™”í•˜ëŠ” ê²½ìš°ë„ ë§ë‹¤.

## ğŸ“Œ ì™œ í•„ìš”í•œê°€?

Android ì•±ì—ì„œ Room DB ìŠ¤í‚¤ë§ˆë¥¼ ì„¤ê³„í•  ë•Œ, ì •ê·œí™” ìˆ˜ì¤€ì„ ê²°ì •í•´ì•¼ í•œë‹¤. ê³¼ë„í•œ ì •ê·œí™”ëŠ” JOIN ë¹„ìš©ì„, ë¶€ì¡±í•œ ì •ê·œí™”ëŠ” ë°ì´í„° ë¶ˆì¼ì¹˜ë¥¼ ì•¼ê¸°í•˜ë¯€ë¡œ ì ì ˆí•œ ê· í˜•ì´ ì¤‘ìš”í•˜ë‹¤.

## ğŸ” ìì„¸íˆ

### ì´ìƒ í˜„ìƒ (Anomaly)

ì •ê·œí™”í•˜ì§€ ì•Šìœ¼ë©´ ë°œìƒí•˜ëŠ” ë¬¸ì œë“¤:

```
// ë¹„ì •ê·œí™”ëœ í…Œì´ë¸”
| í•™ìƒID | í•™ìƒì´ë¦„ | ê³¼ëª©    | êµìˆ˜    |
|--------|----------|---------|---------|
| 1      | ê¹€ì² ìˆ˜   | ìˆ˜í•™    | ë°•êµìˆ˜  |
| 1      | ê¹€ì² ìˆ˜   | ì˜ì–´    | ì´êµìˆ˜  |
| 2      | ì´ì˜í¬   | ìˆ˜í•™    | ë°•êµìˆ˜  |
```

- **ì‚½ì… ì´ìƒ**: í•™ìƒ ì—†ì´ ê³¼ëª©ë§Œ ì¶”ê°€í•  ìˆ˜ ì—†ìŒ
- **ìˆ˜ì • ì´ìƒ**: ë°•êµìˆ˜ ì´ë¦„ ë³€ê²½ ì‹œ ì—¬ëŸ¬ í–‰ì„ ìˆ˜ì •í•´ì•¼ í•¨
- **ì‚­ì œ ì´ìƒ**: ì´ì˜í¬ë¥¼ ì‚­ì œí•˜ë©´ ìˆ˜í•™-ë°•êµìˆ˜ ì •ë³´ë„ ì‚¬ë¼ì§

### ì œ1ì •ê·œí˜• (1NF)

ëª¨ë“  ì»¬ëŸ¼ì˜ ê°’ì´ ì›ìê°’(Atomic)ì´ì–´ì•¼ í•œë‹¤.

```kotlin
// ìœ„ë°˜: í•˜ë‚˜ì˜ ì»¬ëŸ¼ì— ì—¬ëŸ¬ ê°’
@Entity
data class User(
    @PrimaryKey val id: Long,
    val name: String,
    val phones: String  // "010-1234,010-5678" -> ìœ„ë°˜!
)

// 1NF ì¤€ìˆ˜: ë³„ë„ í…Œì´ë¸”ë¡œ ë¶„ë¦¬
@Entity
data class User(
    @PrimaryKey val id: Long,
    val name: String
)

@Entity(
    foreignKeys = [ForeignKey(
        entity = User::class,
        parentColumns = ["id"],
        childColumns = ["userId"],
        onDelete = ForeignKey.CASCADE
    )]
)
data class Phone(
    @PrimaryKey val id: Long,
    val userId: Long,
    val number: String
)
```

### ì œ2ì •ê·œí˜• (2NF)

1NFë¥¼ ë§Œì¡±í•˜ë©´ì„œ, ë¶€ë¶„ í•¨ìˆ˜ ì¢…ì†ì„ ì œê±°í•œë‹¤. ê¸°ë³¸í‚¤ì˜ ì¼ë¶€ì—ë§Œ ì¢…ì†ëœ ì»¬ëŸ¼ì„ ë¶„ë¦¬í•œë‹¤.

```kotlin
// ìœ„ë°˜: (studentId, courseId)ê°€ ë³µí•©í‚¤ì¸ë° courseNameì€ courseIdì—ë§Œ ì¢…ì†
@Entity(primaryKeys = ["studentId", "courseId"])
data class Enrollment(
    val studentId: Long,
    val courseId: Long,
    val courseName: String,  // courseIdì—ë§Œ ì¢…ì† -> ìœ„ë°˜!
    val grade: String
)

// 2NF ì¤€ìˆ˜: ë¶„ë¦¬
@Entity
data class Course(
    @PrimaryKey val courseId: Long,
    val courseName: String
)

@Entity(primaryKeys = ["studentId", "courseId"])
data class Enrollment(
    val studentId: Long,
    val courseId: Long,
    val grade: String
)
```

### ì œ3ì •ê·œí˜• (3NF)

2NFë¥¼ ë§Œì¡±í•˜ë©´ì„œ, ì´í–‰ í•¨ìˆ˜ ì¢…ì†ì„ ì œê±°í•œë‹¤. ê¸°ë³¸í‚¤ê°€ ì•„ë‹Œ ì»¬ëŸ¼ì´ ë‹¤ë¥¸ ë¹„í‚¤ ì»¬ëŸ¼ì„ ê²°ì •í•˜ë©´ ì•ˆ ëœë‹¤.

```kotlin
// ìœ„ë°˜: departmentNameì€ departmentIdì— ì¢…ì† (ì´í–‰ ì¢…ì†)
@Entity
data class Employee(
    @PrimaryKey val id: Long,
    val name: String,
    val departmentId: Long,
    val departmentName: String  // departmentId -> departmentName ì´í–‰ ì¢…ì†!
)

// 3NF ì¤€ìˆ˜
@Entity
data class Employee(
    @PrimaryKey val id: Long,
    val name: String,
    val departmentId: Long
)

@Entity
data class Department(
    @PrimaryKey val departmentId: Long,
    val departmentName: String
)
```

### ì•ˆë“œë¡œì´ë“œì—ì„œì˜ ë¹„ì •ê·œí™” ì „ëµ

ëª¨ë°”ì¼ í™˜ê²½ì—ì„œëŠ” ì„±ëŠ¥ì„ ìœ„í•´ ì˜ë„ì ìœ¼ë¡œ ë¹„ì •ê·œí™”í•˜ê¸°ë„ í•œë‹¤:

```kotlin
// ë¹„ì •ê·œí™”: ìì£¼ í•¨ê»˜ ì¡°íšŒë˜ëŠ” ë°ì´í„°ë¥¼ í•œ í…Œì´ë¸”ì—
@Entity
data class PostWithAuthor(
    @PrimaryKey val postId: Long,
    val title: String,
    val content: String,
    val authorId: Long,
    val authorName: String,    // ë¹„ì •ê·œí™”: ë§¤ë²ˆ JOIN í”¼í•˜ê¸°
    val authorAvatar: String   // ë¹„ì •ê·œí™”
)

// ì •ê·œí™” + Room @Relationìœ¼ë¡œ í•´ê²°í•˜ëŠ” ëŒ€ì•ˆ
data class PostWithAuthor(
    @Embedded val post: Post,
    @Relation(
        parentColumn = "authorId",
        entityColumn = "id"
    )
    val author: User
)
```

**ë¹„ì •ê·œí™”ë¥¼ ê³ ë ¤í•  ë•Œ:**
- ì½ê¸°ê°€ ì“°ê¸°ë³´ë‹¤ í›¨ì”¬ ë§ì€ ê²½ìš°
- ë°ì´í„° ë³€ê²½ì´ ê±°ì˜ ì—†ëŠ” ê²½ìš° (ì˜ˆ: ìºì‹œëœ ì„œë²„ ë°ì´í„°)
- ë³µì¡í•œ JOINì´ UI ì„±ëŠ¥ì„ ì €í•˜ì‹œí‚¤ëŠ” ê²½ìš°

### ì •ê·œí™” ë‹¨ê³„ ìš”ì•½

| ë‹¨ê³„ | ì¡°ê±´ | ì œê±° ëŒ€ìƒ |
|------|------|-----------|
| 1NF | ì›ìê°’ | ë°˜ë³µ ê·¸ë£¹ |
| 2NF | 1NF + ì™„ì „ í•¨ìˆ˜ ì¢…ì† | ë¶€ë¶„ ì¢…ì† |
| 3NF | 2NF + ì´í–‰ ì¢…ì† ì œê±° | ì´í–‰ ì¢…ì† |
| BCNF | ëª¨ë“  ê²°ì •ìê°€ í›„ë³´í‚¤ | ë¹„í›„ë³´í‚¤ ê²°ì •ì |

## ğŸ”— ê´€ë ¨ ê°œë…

- [[00-CS-ê¸°ì´ˆ/ë°ì´í„°ë² ì´ìŠ¤/SQL-ê¸°ì´ˆ|SQL ê¸°ì´ˆ]]
- [[00-CS-ê¸°ì´ˆ/ë°ì´í„°ë² ì´ìŠ¤/ì¸ë±ìŠ¤|ì¸ë±ìŠ¤]]
- [[00-CS-ê¸°ì´ˆ/ë°ì´í„°ë² ì´ìŠ¤/ORM|ORM]]
- [[00-CS-ê¸°ì´ˆ/ì†Œí”„íŠ¸ì›¨ì–´-ê³µí•™/ê²°í•©ë„ì™€-ì‘ì§‘ë„|ê²°í•©ë„ì™€ ì‘ì§‘ë„]]

## ğŸ“š ë” ë³´ê¸°

- [Database Normalization Basics](https://www.studytonight.com/dbms/database-normalization.php)
- [Room ê´€ê³„ ì •ì˜](https://developer.android.com/training/data-storage/room/relationships)

---

**í•µì‹¬ ìš”ì•½:** ì •ê·œí™”ëŠ” ë°ì´í„° ì¤‘ë³µê³¼ ì´ìƒ í˜„ìƒì„ ë°©ì§€í•˜ëŠ” ì„¤ê³„ ì›ì¹™ì´ë©°, Androidì—ì„œëŠ” ì½ê¸° ì„±ëŠ¥ê³¼ ë°ì´í„° ë¬´ê²°ì„± ì‚¬ì´ì˜ ê· í˜•ì„ ê³ ë ¤í•´ ì ì ˆí•œ ìˆ˜ì¤€ì„ ì„ íƒí•œë‹¤.
