---
tags: [CS, ë³´ì•ˆ, í•´ì‹±, SHA, ë¬´ê²°ì„±]
---

# í•´ì‹±

## ğŸ’¡ í•µì‹¬ ê°œë…

í•´ì‹±(Hashing)ì€ ì„ì˜ ê¸¸ì´ì˜ ë°ì´í„°ë¥¼ ê³ ì • ê¸¸ì´ì˜ í•´ì‹œê°’(ë‹¤ì´ì œìŠ¤íŠ¸)ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ë‹¨ë°©í–¥ í•¨ìˆ˜ì´ë‹¤. ë™ì¼í•œ ì…ë ¥ì€ í•­ìƒ ë™ì¼í•œ í•´ì‹œê°’ì„ ìƒì„±í•˜ì§€ë§Œ, í•´ì‹œê°’ìœ¼ë¡œë¶€í„° ì›ë³¸ ë°ì´í„°ë¥¼ ë³µì›í•  ìˆ˜ ì—†ë‹¤. ì•”í˜¸í™”ì™€ ë‹¬ë¦¬ ë³µí˜¸í™” ê°œë…ì´ ì—†ëŠ” ë¹„ê°€ì—­ì  ë³€í™˜ì´ë‹¤.

## ğŸ“Œ ì™œ í•„ìš”í•œê°€?

ì•ˆë“œë¡œì´ë“œì—ì„œ ë¹„ë°€ë²ˆí˜¸ ì €ì¥, ë°ì´í„° ë¬´ê²°ì„± ê²€ì¦, íŒŒì¼ ìºì‹œ í‚¤ ìƒì„±, APK ì„œëª… ê²€ì¦ ë“±ì— í•´ì‹±ì´ ì‚¬ìš©ëœë‹¤. í•´ì‹±ì„ ì´í•´í•´ì•¼ ë³´ì•ˆ ì‚¬ê³ ë¥¼ ì˜ˆë°©í•˜ê³  ì˜¬ë°”ë¥¸ ì¸ì¦ ì‹œìŠ¤í…œì„ ì„¤ê³„í•  ìˆ˜ ìˆë‹¤.

## ğŸ” ìì„¸íˆ

### í•´ì‹œ í•¨ìˆ˜ì˜ í•µì‹¬ ì†ì„±

| ì†ì„± | ì„¤ëª… |
|------|------|
| ê²°ì •ì (Deterministic) | ê°™ì€ ì…ë ¥ â†’ í•­ìƒ ê°™ì€ ì¶œë ¥ |
| ë‹¨ë°©í–¥(One-way) | í•´ì‹œê°’ â†’ ì›ë³¸ ë³µì› ë¶ˆê°€ |
| ê³ ì • ê¸¸ì´ ì¶œë ¥ | ì…ë ¥ í¬ê¸°ì™€ ë¬´ê´€í•˜ê²Œ ì¼ì • (SHA-256: 256ë¹„íŠ¸) |
| ëˆˆì‚¬íƒœ íš¨ê³¼(Avalanche) | ì…ë ¥ 1ë¹„íŠ¸ ë³€ê²½ â†’ ì¶œë ¥ ì™„ì „íˆ ë³€ê²½ |
| ì¶©ëŒ ì €í•­ì„± | ê°™ì€ í•´ì‹œë¥¼ ë§Œë“œëŠ” ì„œë¡œ ë‹¤ë¥¸ ì…ë ¥ ì°¾ê¸° ì–´ë ¤ì›€ |

### í•´ì‹œ ì•Œê³ ë¦¬ì¦˜ ë¹„êµ

| ì•Œê³ ë¦¬ì¦˜ | ì¶œë ¥ ê¸¸ì´ | ì•ˆì „ì„± | ìš©ë„ |
|----------|-----------|--------|------|
| MD5 | 128ë¹„íŠ¸ | ì·¨ì•½ | ì‚¬ìš© ê¸ˆì§€ |
| SHA-1 | 160ë¹„íŠ¸ | ì·¨ì•½ | ì‚¬ìš© ê¸ˆì§€ |
| SHA-256 | 256ë¹„íŠ¸ | ì•ˆì „ | ì¼ë°˜ í•´ì‹± |
| SHA-512 | 512ë¹„íŠ¸ | ì•ˆì „ | ë†’ì€ ë³´ì•ˆ |
| Bcrypt | ê°€ë³€ | ì•ˆì „ | ë¹„ë°€ë²ˆí˜¸ í•´ì‹± |
| Argon2 | ê°€ë³€ | ìµœì‹  | ë¹„ë°€ë²ˆí˜¸ í•´ì‹± |

### Kotlinì—ì„œ SHA-256 í•´ì‹±

```kotlin
import java.security.MessageDigest

fun sha256(input: String): String {
    val digest = MessageDigest.getInstance("SHA-256")
    val hashBytes = digest.digest(input.toByteArray(Charsets.UTF_8))
    return hashBytes.joinToString("") { "%02x".format(it) }
}

// ì‚¬ìš© ì˜ˆì‹œ
val hash = sha256("Hello, Android!")
// "a1b2c3..." (64ìë¦¬ 16ì§„ìˆ˜ ë¬¸ìì—´)
```

### HMAC (Hash-based Message Authentication Code)

í•´ì‹œì— ë¹„ë°€ í‚¤ë¥¼ ê²°í•©í•˜ì—¬ ë©”ì‹œì§€ì˜ ë¬´ê²°ì„±ê³¼ ì¸ì¦ì„ ë™ì‹œì— ë³´ì¥í•œë‹¤.

```kotlin
import javax.crypto.Mac
import javax.crypto.spec.SecretKeySpec

fun hmacSha256(data: String, secret: String): String {
    val mac = Mac.getInstance("HmacSHA256")
    val secretKey = SecretKeySpec(secret.toByteArray(), "HmacSHA256")
    mac.init(secretKey)
    val hashBytes = mac.doFinal(data.toByteArray())
    return hashBytes.joinToString("") { "%02x".format(it) }
}

// API ìš”ì²­ ì„œëª…ì— í™œìš©
val signature = hmacSha256(
    data = "POST:/api/payment:timestamp=1234567890",
    secret = "server_shared_secret"
)
```

### ë¹„ë°€ë²ˆí˜¸ í•´ì‹± (ì†”íŠ¸ + ë°˜ë³µ)

ë‹¨ìˆœ í•´ì‹±ì€ ë ˆì¸ë³´ìš° í…Œì´ë¸” ê³µê²©ì— ì·¨ì•½í•˜ë¯€ë¡œ, ë°˜ë“œì‹œ **ì†”íŠ¸(salt)**ì™€ **ë°˜ë³µ(iteration)**ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

```kotlin
import javax.crypto.SecretKeyFactory
import javax.crypto.spec.PBEKeySpec
import java.security.SecureRandom

fun hashPassword(password: String): Pair<ByteArray, ByteArray> {
    val salt = ByteArray(16).also { SecureRandom().nextBytes(it) }
    val spec = PBEKeySpec(
        password.toCharArray(),
        salt,
        100_000, // ë°˜ë³µ íšŸìˆ˜
        256      // í‚¤ ê¸¸ì´
    )
    val factory = SecretKeyFactory.getInstance("PBKDF2WithHmacSHA256")
    val hash = factory.generateSecret(spec).encoded
    return Pair(salt, hash)
}

fun verifyPassword(password: String, salt: ByteArray, expectedHash: ByteArray): Boolean {
    val spec = PBEKeySpec(password.toCharArray(), salt, 100_000, 256)
    val factory = SecretKeyFactory.getInstance("PBKDF2WithHmacSHA256")
    val actualHash = factory.generateSecret(spec).encoded
    return actualHash.contentEquals(expectedHash)
}
```

### Androidì—ì„œì˜ í•´ì‹± í™œìš©

- **íŒŒì¼ ë¬´ê²°ì„± ê²€ì¦**: ë‹¤ìš´ë¡œë“œ íŒŒì¼ì˜ SHA-256 ì²´í¬ì„¬ ë¹„êµ
- **ìºì‹œ í‚¤ ìƒì„±**: URLì„ í•´ì‹±í•˜ì—¬ íŒŒì¼ëª…ìœ¼ë¡œ ì‚¬ìš© (Glide, OkHttp ìºì‹œ)
- **APK ì„œëª…**: v2/v3 ì„œëª… ìŠ¤í‚´ì—ì„œ APK ë¸”ë¡ í•´ì‹±
- **ë°ì´í„° ë¹„êµ**: ëŒ€ìš©ëŸ‰ ë°ì´í„°ì˜ ë¹ ë¥¸ ë™ì¼ì„± ë¹„êµ

```kotlin
// íŒŒì¼ í•´ì‹œ ê³„ì‚° (ë¬´ê²°ì„± ê²€ì¦)
fun fileHash(file: File): String {
    val digest = MessageDigest.getInstance("SHA-256")
    file.inputStream().use { input ->
        val buffer = ByteArray(8192)
        var bytesRead: Int
        while (input.read(buffer).also { bytesRead = it } != -1) {
            digest.update(buffer, 0, bytesRead)
        }
    }
    return digest.digest().joinToString("") { "%02x".format(it) }
}
```

## ğŸ”— ê´€ë ¨ ê°œë…

- [[00-CS-ê¸°ì´ˆ/ë³´ì•ˆ-ê¸°ì´ˆ/ì•”í˜¸í™”-ê¸°ì´ˆ|ì•”í˜¸í™” ê¸°ì´ˆ]]
- [[00-CS-ê¸°ì´ˆ/ë³´ì•ˆ-ê¸°ì´ˆ/ëŒ€ì¹­í‚¤-vs-ë¹„ëŒ€ì¹­í‚¤|ëŒ€ì¹­í‚¤ vs ë¹„ëŒ€ì¹­í‚¤]]
- [[00-CS-ê¸°ì´ˆ/ë³´ì•ˆ-ê¸°ì´ˆ/ì¸ì¦-vs-ì¸ê°€|ì¸ì¦ vs ì¸ê°€]]

## ğŸ“š ë” ë³´ê¸°

- [OWASP Password Storage Cheat Sheet](https://cheatsheetseries.owasp.org/cheatsheets/Password_Storage_Cheat_Sheet.html)
- [Android MessageDigest ê³µì‹ ë¬¸ì„œ](https://developer.android.com/reference/java/security/MessageDigest)

---

**í•µì‹¬ ìš”ì•½:** í•´ì‹±ì€ ë‹¨ë°©í–¥ í•¨ìˆ˜ë¡œ ë°ì´í„° ë¬´ê²°ì„± ê²€ì¦ê³¼ ë¹„ë°€ë²ˆí˜¸ ì €ì¥ì— ì‚¬ìš©ë˜ë©°, ë°˜ë“œì‹œ ì†”íŠ¸ì™€ ë°˜ë³µì„ ì ìš©í•œ ì•Œê³ ë¦¬ì¦˜(PBKDF2, Bcrypt, Argon2)ì„ ì‚¬ìš©í•´ì•¼ ì•ˆì „í•˜ë‹¤.
