---
tags: [cs, algorithm, recursion, iteration, tailrec, kotlin]
---

# ì¬ê·€ì™€ ë°˜ë³µ

## ğŸ’¡ í•µì‹¬ ê°œë…

**ì¬ê·€**(Recursion)ëŠ” í•¨ìˆ˜ê°€ ìê¸° ìì‹ ì„ í˜¸ì¶œí•˜ëŠ” ë°©ì‹ì´ê³ , **ë°˜ë³µ**(Iteration)ì€ ë£¨í”„ë¡œ ê°™ì€ ì‘ì—…ì„ ë°˜ë³µí•˜ëŠ” ë°©ì‹ì´ë‹¤. Kotlinì€ `tailrec` í‚¤ì›Œë“œë¡œ ê¼¬ë¦¬ ì¬ê·€ ìµœì í™”ë¥¼ ì§€ì›í•˜ì—¬, ì¬ê·€ë¥¼ ë°˜ë³µë¬¸ì²˜ëŸ¼ ì•ˆì „í•˜ê²Œ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.

## ğŸ“Œ ì™œ í•„ìš”í•œê°€?

View íŠ¸ë¦¬ ìˆœíšŒ, JSON íŒŒì‹±, íŒŒì¼ ì‹œìŠ¤í…œ íƒìƒ‰ ë“± ê³„ì¸µì  êµ¬ì¡°ì—ì„œ ì¬ê·€ê°€ ìì—°ìŠ¤ëŸ½ë‹¤. ê·¸ëŸ¬ë‚˜ ê¹Šì€ ì¬ê·€ëŠ” StackOverflowErrorë¥¼ ì¼ìœ¼í‚¤ë¯€ë¡œ íŠ¸ë ˆì´ë“œì˜¤í”„ë¥¼ ì´í•´í•´ì•¼ í•œë‹¤.

## ğŸ” ìì„¸íˆ

### ì¬ê·€ vs ë°˜ë³µ

```kotlin
// ì¬ê·€ - íŒ©í† ë¦¬ì–¼
fun factorial(n: Int): Long {
    if (n <= 1) return 1L           // ê¸°ì € ì¡°ê±´
    return n * factorial(n - 1)     // ì¬ê·€ í˜¸ì¶œ
}

// ë°˜ë³µ - íŒ©í† ë¦¬ì–¼
fun factorialLoop(n: Int): Long {
    var result = 1L
    for (i in 2..n) result *= i
    return result
}
```

| íŠ¹ì„± | ì¬ê·€ | ë°˜ë³µ |
|---|---|---|
| ê°€ë…ì„± | íŠ¸ë¦¬/ê·¸ë˜í”„ì—ì„œ ì§ê´€ì  | ë‹¨ìˆœ ë°˜ë³µì—ì„œ ì§ê´€ì  |
| ë©”ëª¨ë¦¬ | í˜¸ì¶œ ìŠ¤íƒ O(n) | ìƒìˆ˜ ê³µê°„ O(1) |
| ì„±ëŠ¥ | í•¨ìˆ˜ í˜¸ì¶œ ì˜¤ë²„í—¤ë“œ | ì¼ë°˜ì ìœ¼ë¡œ ë” ë¹ ë¦„ |
| ìœ„í—˜ | StackOverflowError | ë¬´í•œ ë£¨í”„ |

### tailrec ìµœì í™”

```kotlin
// ì»´íŒŒì¼ëŸ¬ê°€ ì¬ê·€ë¥¼ ë°˜ë³µë¬¸ìœ¼ë¡œ ë³€í™˜
// ì¡°ê±´: ë§ˆì§€ë§‰ ì—°ì‚°ì´ ì¬ê·€ í˜¸ì¶œì´ì–´ì•¼ í•¨
tailrec fun factorialTail(n: Int, acc: Long = 1): Long {
    if (n <= 1) return acc
    return factorialTail(n - 1, n * acc)  // ê¼¬ë¦¬ ìœ„ì¹˜
}

// í”¼ë³´ë‚˜ì¹˜ - tailrec
tailrec fun fib(n: Int, prev: Long = 0, curr: Long = 1): Long {
    if (n == 0) return prev
    return fib(n - 1, curr, prev + curr)
}

// âŒ tailrec ë¶ˆê°€ - ê³±ì…ˆì´ ë§ˆì§€ë§‰ ì—°ì‚°
fun notTail(n: Int): Long {
    if (n <= 1) return 1L
    return n * notTail(n - 1)  // ì¬ê·€ í˜¸ì¶œ í›„ ê³±ì…ˆ
}
```

### Android ì‹¤ë¬´ í™œìš©

```kotlin
// 1. View íŠ¸ë¦¬ ìˆœíšŒ (ì¬ê·€ê°€ ìì—°ìŠ¤ëŸ¬ì›€)
fun collectTextViews(view: View): List<TextView> {
    val result = mutableListOf<TextView>()
    if (view is TextView) result.add(view)
    if (view is ViewGroup) {
        for (i in 0 until view.childCount)
            result.addAll(collectTextViews(view.getChildAt(i)))
    }
    return result
}

// 2. ë””ë ‰í† ë¦¬ ì¬ê·€ íƒìƒ‰
fun listAllFiles(dir: File): List<File> {
    val files = mutableListOf<File>()
    dir.listFiles()?.forEach {
        if (it.isDirectory) files.addAll(listAllFiles(it))
        else files.add(it)
    }
    return files
}

// 3. ê¹Šì´ ë³´ì¥ ì•ˆ ë  ë•Œ â†’ ë°˜ë³µ(ìŠ¤íƒ)ìœ¼ë¡œ ë³€í™˜
fun listAllFilesIterative(root: File): List<File> {
    val files = mutableListOf<File>()
    val stack = ArrayDeque<File>()
    stack.addLast(root)
    while (stack.isNotEmpty()) {
        val current = stack.removeLast()
        if (current.isDirectory) {
            current.listFiles()?.forEach { stack.addLast(it) }
        } else {
            files.add(current)
        }
    }
    return files
}
```

### DeepRecursiveFunction

```kotlin
// Kotlin í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ - ê¹Šì€ ì¬ê·€ë„ StackOverflow ì—†ì´
val deepFib = DeepRecursiveFunction<Int, Long> { n ->
    if (n <= 1) n.toLong()
    else callRecursive(n - 1) + callRecursive(n - 2)
}
val result = deepFib(10000) // ì•ˆì „í•˜ê²Œ ë™ì‘
```

### ì‹¤ì „ íŒ

- íŠ¸ë¦¬ ê¹Šì´ê°€ ë³´ì¥ë˜ì§€ ì•Šìœ¼ë©´ ë°˜ë³µ(ìŠ¤íƒ)ìœ¼ë¡œ ë³€í™˜
- Android ê¸°ë³¸ ìŠ¤íƒ: ì•½ 1MB â†’ ì•½ 1,000~3,000íšŒ ê¹Šì´ í•œê³„
- `tailrec` ì‚¬ìš© ê°€ëŠ¥í•˜ë©´ í•­ìƒ ì‚¬ìš©
- `DeepRecursiveFunction`ìœ¼ë¡œ ê¹Šì€ ì¬ê·€ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬

## ğŸ”— ê´€ë ¨ ê°œë…

- [[00-CS-ê¸°ì´ˆ/ì•Œê³ ë¦¬ì¦˜/ë™ì -í”„ë¡œê·¸ë˜ë°|ë™ì  í”„ë¡œê·¸ë˜ë°]]
- [[00-CS-ê¸°ì´ˆ/ì•Œê³ ë¦¬ì¦˜/íƒìƒ‰-ì•Œê³ ë¦¬ì¦˜|íƒìƒ‰ ì•Œê³ ë¦¬ì¦˜]]
- [[00-CS-ê¸°ì´ˆ/ìë£Œêµ¬ì¡°/ìŠ¤íƒê³¼-í|ìŠ¤íƒê³¼ í]]
- [[00-CS-ê¸°ì´ˆ/ë©”ëª¨ë¦¬/ìŠ¤íƒ-vs-í™|ìŠ¤íƒ vs í™]]

## ğŸ“š ë” ë³´ê¸°

- [Kotlin tailrec](https://kotlinlang.org/docs/functions.html#tail-recursive-functions)
- [DeepRecursiveFunction](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-deep-recursive-function/)

---

**í•µì‹¬ ìš”ì•½:** ì¬ê·€ëŠ” ê³„ì¸µ êµ¬ì¡°ì—ì„œ ì§ê´€ì ì´ì§€ë§Œ ìŠ¤íƒ ì œí•œì´ ìˆë‹¤. Kotlinì˜ `tailrec`ìœ¼ë¡œ ì•ˆì „í•˜ê²Œ ìµœì í™”í•˜ê±°ë‚˜, ê¹Šì´ê°€ ë¶ˆí™•ì‹¤í•˜ë©´ ë°˜ë³µ(ìŠ¤íƒ)ìœ¼ë¡œ ë³€í™˜í•œë‹¤.
