---
tags: [cs, algorithm, sorting, timsort, kotlin]
---

# ì •ë ¬ ì•Œê³ ë¦¬ì¦˜

## ğŸ’¡ í•µì‹¬ ê°œë…

ì •ë ¬ ì•Œê³ ë¦¬ì¦˜ì€ ë°ì´í„°ë¥¼ íŠ¹ì • ê¸°ì¤€ì— ë”°ë¼ ìˆœì„œëŒ€ë¡œ ë°°ì¹˜í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì´ë‹¤. Kotlin/Javaì˜ ê¸°ë³¸ ì •ë ¬ì€ **TimSort**(O(n log n), ì•ˆì • ì •ë ¬)ë¥¼ ì‚¬ìš©í•œë‹¤. ì•Œê³ ë¦¬ì¦˜ë§ˆë‹¤ ì‹œê°„ ë³µì¡ë„, ê³µê°„ ë³µì¡ë„, ì•ˆì •ì„±(stability)ì´ ë‹¤ë¥´ë‹¤.

## ğŸ“Œ ì™œ í•„ìš”í•œê°€?

RecyclerView ëª©ë¡ ì •ë ¬, Room ì¿¼ë¦¬ ê²°ê³¼ ì¬ì •ë ¬, ê²€ìƒ‰ ê²°ê³¼ ë­í‚¹ ë“± ê±°ì˜ ëª¨ë“  UI ë¡œì§ì— ì •ë ¬ì´ ì‚¬ìš©ëœë‹¤.

## ğŸ” ìì„¸íˆ

### ì •ë ¬ ì•Œê³ ë¦¬ì¦˜ ë¹„êµ

| ì•Œê³ ë¦¬ì¦˜ | í‰ê·  | ìµœì•… | ê³µê°„ | ì•ˆì •ì„± |
|---|---|---|---|---|
| ë²„ë¸” ì •ë ¬ | O(nÂ²) | O(nÂ²) | O(1) | ì•ˆì • |
| ì„ íƒ ì •ë ¬ | O(nÂ²) | O(nÂ²) | O(1) | ë¶ˆì•ˆì • |
| ì‚½ì… ì •ë ¬ | O(nÂ²) | O(nÂ²) | O(1) | ì•ˆì • |
| ë³‘í•© ì •ë ¬ | O(n log n) | O(n log n) | O(n) | ì•ˆì • |
| í€µ ì •ë ¬ | O(n log n) | O(nÂ²) | O(log n) | ë¶ˆì•ˆì • |
| **TimSort** | **O(n log n)** | **O(n log n)** | **O(n)** | **ì•ˆì •** |

> **ì•ˆì • ì •ë ¬**: ê°™ì€ ê°’ì˜ ì›ë˜ ìˆœì„œê°€ ìœ ì§€ë¨. ì˜ˆ: ë‚˜ì´ë¡œ ì •ë ¬ ì‹œ ê°™ì€ ë‚˜ì´ì¸ ì‚¬ëŒë“¤ì˜ ì´ë¦„ ìˆœì„œê°€ ìœ ì§€.

### Kotlin ì •ë ¬ í•¨ìˆ˜

```kotlin
val numbers = listOf(3, 1, 4, 1, 5, 9)

// ê¸°ë³¸ ì •ë ¬
numbers.sorted()           // [1, 1, 3, 4, 5, 9]
numbers.sortedDescending() // [9, 5, 4, 3, 1, 1]

// í”„ë¡œí¼í‹° ê¸°ì¤€
data class User(val name: String, val age: Int)
val users = listOf(User("Kim", 25), User("Lee", 22), User("Park", 30))

users.sortedBy { it.age }             // ë‚˜ì´ ì˜¤ë¦„ì°¨ìˆœ
users.sortedByDescending { it.age }   // ë‚˜ì´ ë‚´ë¦¼ì°¨ìˆœ

// ë³µí•© ì •ë ¬ ì¡°ê±´
users.sortedWith(
    compareBy<User> { it.age }
        .thenBy { it.name }
)

// MutableListì˜ in-place ì •ë ¬
val mutable = mutableListOf(3, 1, 4)
mutable.sort()  // ì›ë³¸ ë³€ê²½
```

### ì£¼ìš” ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„

```kotlin
// ë³‘í•© ì •ë ¬ - O(n log n), ì•ˆì •
fun mergeSort(list: List<Int>): List<Int> {
    if (list.size <= 1) return list
    val mid = list.size / 2
    val left = mergeSort(list.subList(0, mid))
    val right = mergeSort(list.subList(mid, list.size))
    return merge(left, right)
}

fun merge(left: List<Int>, right: List<Int>): List<Int> {
    val result = mutableListOf<Int>()
    var i = 0; var j = 0
    while (i < left.size && j < right.size) {
        if (left[i] <= right[j]) result.add(left[i++])
        else result.add(right[j++])
    }
    result.addAll(left.subList(i, left.size))
    result.addAll(right.subList(j, right.size))
    return result
}

// í€µ ì •ë ¬ - O(n log n) í‰ê· 
fun quickSort(arr: IntArray, low: Int = 0, high: Int = arr.lastIndex) {
    if (low < high) {
        val pivot = partition(arr, low, high)
        quickSort(arr, low, pivot - 1)
        quickSort(arr, pivot + 1, high)
    }
}

fun partition(arr: IntArray, low: Int, high: Int): Int {
    val pivot = arr[high]
    var i = low - 1
    for (j in low until high) {
        if (arr[j] < pivot) {
            i++
            arr[i] = arr[j].also { arr[j] = arr[i] }
        }
    }
    arr[i + 1] = arr[high].also { arr[high] = arr[i + 1] }
    return i + 1
}
```

### Android ì‹¤ë¬´ í™œìš©

```kotlin
// ViewModelì—ì„œ ëª©ë¡ ì •ë ¬
class TodoViewModel : ViewModel() {
    private val _todos = MutableStateFlow<List<Todo>>(emptyList())

    // ë³µí•© ì •ë ¬: ë¯¸ì™„ë£Œ ìš°ì„  â†’ ìš°ì„ ìˆœìœ„ ë†’ì€ ìˆœ â†’ ë‚ ì§œ ìˆœ
    fun sortComplex() {
        _todos.update { list ->
            list.sortedWith(
                compareBy<Todo> { it.isCompleted }
                    .thenByDescending { it.priority }
                    .thenBy { it.createdAt }
            )
        }
    }
}

// Roomì—ì„œëŠ” DB ë ˆë²¨ ì •ë ¬ì´ ë” íš¨ìœ¨ì 
@Query("SELECT * FROM todos ORDER BY is_completed ASC, priority DESC")
fun getTodosSorted(): Flow<List<Todo>>
```

### TimSort

Kotlinì˜ `sorted()`ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ **TimSort**ë¥¼ ì‚¬ìš©í•œë‹¤. ì‚½ì… ì •ë ¬ + ë³‘í•© ì •ë ¬ì˜ í•˜ì´ë¸Œë¦¬ë“œë¡œ, ì´ë¯¸ ë¶€ë¶„ì ìœ¼ë¡œ ì •ë ¬ëœ ë°ì´í„°ì—ì„œ O(n)ì— ê°€ê¹Œìš´ ì„±ëŠ¥ì„ ë³´ì¸ë‹¤.

## ğŸ”— ê´€ë ¨ ê°œë…

- [[00-CS-ê¸°ì´ˆ/ì•Œê³ ë¦¬ì¦˜/ì‹œê°„-ë³µì¡ë„-Big-O|ì‹œê°„ ë³µì¡ë„ Big-O]]
- [[00-CS-ê¸°ì´ˆ/ì•Œê³ ë¦¬ì¦˜/íƒìƒ‰-ì•Œê³ ë¦¬ì¦˜|íƒìƒ‰ ì•Œê³ ë¦¬ì¦˜]]
- [[00-CS-ê¸°ì´ˆ/ìë£Œêµ¬ì¡°/ë°°ì—´-vs-ì—°ê²°ë¦¬ìŠ¤íŠ¸|ë°°ì—´ vs ì—°ê²°ë¦¬ìŠ¤íŠ¸]]

## ğŸ“š ë” ë³´ê¸°

- [Kotlin Collection Ordering](https://kotlinlang.org/docs/collection-ordering.html)
- [TimSort ìœ„í‚¤](https://en.wikipedia.org/wiki/Timsort)

---

**í•µì‹¬ ìš”ì•½:** Kotlinì˜ sorted()ëŠ” TimSort(O(n log n), ì•ˆì •)ë¥¼ ì‚¬ìš©. Androidì—ì„œ ëª©ë¡ ì •ë ¬ì€ DB ë ˆë²¨ ì •ë ¬ê³¼ ë©”ëª¨ë¦¬ ë‚´ ì •ë ¬ì˜ íŠ¸ë ˆì´ë“œì˜¤í”„ë¥¼ ê³ ë ¤í•´ì•¼ í•œë‹¤.
