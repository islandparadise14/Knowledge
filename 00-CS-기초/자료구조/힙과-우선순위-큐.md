---
tags: [CS, ìë£Œêµ¬ì¡°, í™, ìš°ì„ ìˆœìœ„í, PriorityQueue, ìµœì†Œí™, ìµœëŒ€í™]
---

# í™ê³¼ ìš°ì„ ìˆœìœ„ í

## ğŸ’¡ í•µì‹¬ ê°œë…

í™(Heap)ì€ **ì™„ì „ ì´ì§„ íŠ¸ë¦¬** ê¸°ë°˜ì˜ ìë£Œêµ¬ì¡°ë¡œ, ë¶€ëª¨ ë…¸ë“œê°€ ìì‹ ë…¸ë“œë³´ë‹¤ í•­ìƒ í¬ê±°ë‚˜(ìµœëŒ€ í™) ì‘ì€(ìµœì†Œ í™) ì„±ì§ˆì„ ìœ ì§€í•œë‹¤. ìš°ì„ ìˆœìœ„ í(Priority Queue)ëŠ” ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ ìš”ì†Œê°€ ë¨¼ì € ë‚˜ì˜¤ëŠ” ì¶”ìƒ ìë£Œí˜•ì´ë©°, ë³´í†µ í™ìœ¼ë¡œ êµ¬í˜„ëœë‹¤.

## ğŸ“Œ ì™œ í•„ìš”í•œê°€?

Androidì—ì„œ ì‘ì—… ìŠ¤ì¼€ì¤„ë§, ì´ë²¤íŠ¸ ìš°ì„ ìˆœìœ„ ì²˜ë¦¬, ì•Œë¦¼ ì •ë ¬ ë“±ì— í™œìš©ëœë‹¤. ë‹¤ìµìŠ¤íŠ¸ë¼ ìµœë‹¨ ê²½ë¡œ ì•Œê³ ë¦¬ì¦˜ì˜ í•µì‹¬ ìë£Œêµ¬ì¡°ì´ê¸°ë„ í•˜ë‹¤.

## ğŸ” ìì„¸íˆ

### í™ì˜ êµ¬ì¡°

```
ìµœì†Œ í™ (Min Heap):
        1
       / \
      3   2
     / \ / \
    7  4 5  6

- ë¶€ëª¨ â‰¤ ìì‹
- ë°°ì—´ë¡œ í‘œí˜„: [1, 3, 2, 7, 4, 5, 6]
- ë¶€ëª¨ ì¸ë±ìŠ¤: (i - 1) / 2
- ì™¼ìª½ ìì‹: 2 * i + 1
- ì˜¤ë¥¸ìª½ ìì‹: 2 * i + 2
```

### PriorityQueue ê¸°ë³¸ ì‚¬ìš©ë²•

Kotlin/Javaì˜ `PriorityQueue`ëŠ” **ìµœì†Œ í™**ì´ ê¸°ë³¸ì´ë‹¤.

```kotlin
import java.util.PriorityQueue

// ìµœì†Œ í™ (ê¸°ë³¸) - ì‘ì€ ê°’ì´ ë¨¼ì € ë‚˜ì˜´
val minHeap = PriorityQueue<Int>()
minHeap.add(5)
minHeap.add(1)
minHeap.add(3)
println(minHeap.poll()) // 1
println(minHeap.poll()) // 3
println(minHeap.poll()) // 5

// ìµœëŒ€ í™ - í° ê°’ì´ ë¨¼ì € ë‚˜ì˜´
val maxHeap = PriorityQueue<Int>(compareByDescending { it })
maxHeap.addAll(listOf(5, 1, 3))
println(maxHeap.poll()) // 5
println(maxHeap.poll()) // 3

// ì»¤ìŠ¤í…€ ìš°ì„ ìˆœìœ„
data class Task(val name: String, val priority: Int)

val taskQueue = PriorityQueue<Task>(compareBy { it.priority })
taskQueue.add(Task("ë‚®ì€ ìš°ì„ ìˆœìœ„", 3))
taskQueue.add(Task("ë†’ì€ ìš°ì„ ìˆœìœ„", 1))
taskQueue.add(Task("ì¤‘ê°„ ìš°ì„ ìˆœìœ„", 2))

println(taskQueue.poll().name) // "ë†’ì€ ìš°ì„ ìˆœìœ„"
println(taskQueue.poll().name) // "ì¤‘ê°„ ìš°ì„ ìˆœìœ„"
```

### ì‹œê°„ ë³µì¡ë„

| ì—°ì‚° | ì‹œê°„ ë³µì¡ë„ | ì„¤ëª… |
|------|-----------|------|
| ì‚½ì… (add) | **O(log n)** | ëì— ì¶”ê°€ í›„ ìœ„ë¡œ ì •ë ¬ (sift up) |
| ìµœì†Ÿê°’/ìµœëŒ“ê°’ ì¡°íšŒ (peek) | **O(1)** | ë£¨íŠ¸ ë…¸ë“œ ë°˜í™˜ |
| ì‚­ì œ (poll) | **O(log n)** | ë£¨íŠ¸ ì œê±° í›„ ì•„ë˜ë¡œ ì •ë ¬ (sift down) |
| ì„ì˜ ì›ì†Œ ê²€ìƒ‰ | O(n) | í™ì€ ê²€ìƒ‰ì— ìµœì í™”ë˜ì§€ ì•ŠìŒ |
| í™ ìƒì„± (heapify) | **O(n)** | nê°œ ì›ì†Œë¥¼ í•œ ë²ˆì— í™ìœ¼ë¡œ |

### í™ ì§ì ‘ êµ¬í˜„

```kotlin
class MinHeap<T : Comparable<T>> {
    private val data = mutableListOf<T>()

    val size get() = data.size
    fun isEmpty() = data.isEmpty()
    fun peek(): T = data.first()

    fun add(value: T) {
        data.add(value)
        siftUp(data.lastIndex)
    }

    fun poll(): T {
        val result = data.first()
        val last = data.removeLast()
        if (data.isNotEmpty()) {
            data[0] = last
            siftDown(0)
        }
        return result
    }

    private fun siftUp(index: Int) {
        var i = index
        while (i > 0) {
            val parent = (i - 1) / 2
            if (data[i] >= data[parent]) break
            data[i] = data[parent].also { data[parent] = data[i] }
            i = parent
        }
    }

    private fun siftDown(index: Int) {
        var i = index
        while (2 * i + 1 < data.size) {
            var smallest = 2 * i + 1
            val right = 2 * i + 2
            if (right < data.size && data[right] < data[smallest]) {
                smallest = right
            }
            if (data[i] <= data[smallest]) break
            data[i] = data[smallest].also { data[smallest] = data[i] }
            i = smallest
        }
    }
}
```

### í™œìš© íŒ¨í„´: Top-K ë¬¸ì œ

```kotlin
// Kë²ˆì§¸ í° ì›ì†Œ ì°¾ê¸° - ìµœì†Œ í™ í¬ê¸°ë¥¼ Kë¡œ ìœ ì§€
fun findKthLargest(nums: List<Int>, k: Int): Int {
    val minHeap = PriorityQueue<Int>()
    for (num in nums) {
        minHeap.add(num)
        if (minHeap.size > k) minHeap.poll()
    }
    return minHeap.peek() // Kë²ˆì§¸ë¡œ í° ê°’
}

// ì‚¬ìš© ì˜ˆì‹œ
val scores = listOf(40, 10, 80, 30, 60, 50, 70)
println(findKthLargest(scores, 3)) // 60 (3ë²ˆì§¸ë¡œ í° ê°’)
```

### Android ì‹¤ì „ í™œìš©

```kotlin
// 1. ì•Œë¦¼ ìš°ì„ ìˆœìœ„ í
data class Notification(
    val title: String,
    val priority: Int, // 1: ê¸´ê¸‰, 2: ë†’ìŒ, 3: ë³´í†µ
    val timestamp: Long
)

val notificationQueue = PriorityQueue<Notification>(
    compareBy<Notification> { it.priority }
        .thenBy { it.timestamp }
)
notificationQueue.add(Notification("ì¼ë°˜ ë©”ì‹œì§€", 3, System.currentTimeMillis()))
notificationQueue.add(Notification("ê¸´ê¸‰ ì•Œë¦¼!", 1, System.currentTimeMillis()))
// poll() â†’ "ê¸´ê¸‰ ì•Œë¦¼!" ë¨¼ì € ì²˜ë¦¬

// 2. ë‹¤ìµìŠ¤íŠ¸ë¼ - ìµœë‹¨ ê²½ë¡œ (ë„¤ë¹„ê²Œì´ì…˜)
data class Node(val id: String, val distance: Int)

fun dijkstra(graph: Map<String, List<Pair<String, Int>>>, start: String): Map<String, Int> {
    val distances = mutableMapOf<String, Int>().withDefault { Int.MAX_VALUE }
    val pq = PriorityQueue<Node>(compareBy { it.distance })

    distances[start] = 0
    pq.add(Node(start, 0))

    while (pq.isNotEmpty()) {
        val (current, dist) = pq.poll()
        if (dist > distances.getValue(current)) continue

        graph[current]?.forEach { (next, weight) ->
            val newDist = dist + weight
            if (newDist < distances.getValue(next)) {
                distances[next] = newDist
                pq.add(Node(next, newDist))
            }
        }
    }
    return distances
}

// 3. ì´ë²¤íŠ¸ ìŠ¤ì¼€ì¤„ë§ - íƒ€ì´ë¨¸ ê¸°ë°˜ ì‘ì—…
data class ScheduledEvent(val action: () -> Unit, val executeAt: Long)

val scheduler = PriorityQueue<ScheduledEvent>(compareBy { it.executeAt })
```

### í™ vs ì •ë ¬ ë¹„êµ

| ìƒí™© | í™ (PriorityQueue) | ì •ë ¬ (sort) |
|------|-------------------|-------------|
| ì „ì²´ ì •ë ¬ í•„ìš” | O(n log n) | **O(n log n)** |
| ìƒìœ„ Kê°œë§Œ í•„ìš” | **O(n log k)** | O(n log n) |
| ë™ì  ì‚½ì…/ì‚­ì œ | **O(log n)** | O(n log n) ì¬ì •ë ¬ |
| ìµœì†Ÿê°’/ìµœëŒ“ê°’ë§Œ í•„ìš” | **O(1) ì¡°íšŒ** | O(n) ì¬ì •ë ¬ |

## ğŸ”— ê´€ë ¨ ê°œë…

- [[00-CS-ê¸°ì´ˆ/ìë£Œêµ¬ì¡°/íŠ¸ë¦¬|íŠ¸ë¦¬]]
- [[00-CS-ê¸°ì´ˆ/ìë£Œêµ¬ì¡°/ìŠ¤íƒê³¼-í|ìŠ¤íƒê³¼ í]]
- [[00-CS-ê¸°ì´ˆ/ì•Œê³ ë¦¬ì¦˜/ì •ë ¬-ì•Œê³ ë¦¬ì¦˜|ì •ë ¬ ì•Œê³ ë¦¬ì¦˜]]
- [[00-CS-ê¸°ì´ˆ/ì•Œê³ ë¦¬ì¦˜/ê·¸ë¦¬ë””|ê·¸ë¦¬ë””]]

## ğŸ“š ë” ë³´ê¸°

- [Java PriorityQueue ê³µì‹ ë¬¸ì„œ](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/PriorityQueue.html)
- [í™ ì‹œê°í™”](https://visualgo.net/en/heap)

---

**í•µì‹¬ ìš”ì•½:** í™ì€ ìµœì†Ÿê°’/ìµœëŒ“ê°’ì„ O(1)ì— ì¡°íšŒí•˜ê³  O(log n)ì— ì‚½ì…/ì‚­ì œí•˜ëŠ” ìë£Œêµ¬ì¡°ë¡œ, Top-K ë¬¸ì œì™€ ë‹¤ìµìŠ¤íŠ¸ë¼ ì•Œê³ ë¦¬ì¦˜ì— í•µì‹¬ì ì´ë‹¤.
