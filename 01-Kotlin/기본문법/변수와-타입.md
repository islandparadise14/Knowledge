---
tags: [kotlin, basics]
---

# ë³€ìˆ˜ì™€ íƒ€ì…

## ğŸ’¡ í•µì‹¬ ê°œë…

**valì€ ë¶ˆë³€(immutable), varëŠ” ê°€ë³€(mutable)**. ê¸°ë³¸ì ìœ¼ë¡œ valì„ ì“°ê³ , ê¼­ í•„ìš”í•  ë•Œë§Œ varë¥¼ ì“°ì.

## ğŸ“Œ ì™œ í•„ìš”í•œê°€?

ë¶ˆë³€ì„±(immutability)ì€ ì½”ë“œë¥¼ ì˜ˆì¸¡ ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ê³ , ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ ì•ˆì „í•˜ë‹¤. íŠ¹íˆ ì½”ë£¨í‹´ì´ë‚˜ Flowë¥¼ ë‹¤ë£° ë•Œ ë¶ˆë³€ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ ë™ì‹œì„± ì´ìŠˆë¥¼ í¬ê²Œ ì¤„ì¼ ìˆ˜ ìˆë‹¤.

## ğŸ” ìì„¸íˆ

### ê¸°ë³¸ ì‚¬ìš©ë²•

```kotlin
// val - ë¶ˆë³€ ë³€ìˆ˜ (ê¶Œì¥)
val name: String = "ë¯¼íŠ¸"
val age: Int = 27

// íƒ€ì… ì¶”ë¡  (Type Inference)
val city = "Seoul"  // Stringìœ¼ë¡œ ì¶”ë¡ 
val count = 10      // Intë¡œ ì¶”ë¡ 

// var - ê°€ë³€ ë³€ìˆ˜ (í•„ìš”í•  ë•Œë§Œ)
var score = 100
score = 200  // OK

// valì€ ì¬í• ë‹¹ ë¶ˆê°€
val maxScore = 100
// maxScore = 200  // ERROR: Val cannot be reassigned
```

### ë™ì‘ ì›ë¦¬

**val vs varì˜ ì°¨ì´**

```kotlin
// valì€ Javaì˜ finalê³¼ ìœ ì‚¬
val list = mutableListOf(1, 2, 3)
list.add(4)           // OK - ê°ì²´ ë‚´ë¶€ ìƒíƒœëŠ” ë³€ê²½ ê°€ëŠ¥
// list = mutableListOf(5, 6)  // ERROR - ì°¸ì¡°ëŠ” ë³€ê²½ ë¶ˆê°€

// varëŠ” ì°¸ì¡° ìì²´ë¥¼ ë°”ê¿€ ìˆ˜ ìˆìŒ
var list2 = mutableListOf(1, 2, 3)
list2.add(4)          // OK
list2 = mutableListOf(5, 6)  // OK - ì°¸ì¡° ë³€ê²½ ê°€ëŠ¥
```

**Backing Field**

Kotlinì˜ í”„ë¡œí¼í‹°ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ backing fieldë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤:

```kotlin
class User {
    // ìë™ìœ¼ë¡œ backing field ìƒì„±
    var name: String = ""
        get() = field.uppercase()  // fieldëŠ” ì‹¤ì œ ì €ì¥ëœ ê°’
        set(value) {
            field = value.trim()
        }
}
```

### ê¸°ë³¸ íƒ€ì…ë“¤

```kotlin
// ìˆ«ì íƒ€ì…
val byte: Byte = 127
val short: Short = 32767
val int: Int = 2147483647
val long: Long = 9223372036854775807L  // L ì ‘ë¯¸ì‚¬

// ì‹¤ìˆ˜ íƒ€ì…
val float: Float = 3.14f  // f ì ‘ë¯¸ì‚¬ í•„ìˆ˜
val double: Double = 3.14

// ë¬¸ì
val char: Char = 'A'

// ë¶ˆë¦°
val isValid: Boolean = true

// ë¬¸ìì—´
val message: String = "Hello"
```

**ì–¸ë”ìŠ¤ì½”ì–´ë¡œ ê°€ë…ì„± ë†’ì´ê¸°**

```kotlin
val million = 1_000_000
val creditCard = 1234_5678_9012_3456L
val bytes = 0xFF_EC_DE_5E
```

### ì£¼ì˜ì‚¬í•­

**1. val â‰  ì™„ì „í•œ ë¶ˆë³€ì„±**

```kotlin
val user = User("ë¯¼íŠ¸")
user.name = "ë¯¼íŠ¸2"  // OK - ê°ì²´ í”„ë¡œí¼í‹°ëŠ” ë³€ê²½ ê°€ëŠ¥

// ì™„ì „í•œ ë¶ˆë³€ì„±ì„ ì›í•œë‹¤ë©´ data class + val í”„ë¡œí¼í‹° ì‚¬ìš©
data class ImmutableUser(val name: String, val age: Int)
```

**2. lateinit vs lazy**

```kotlin
// lateinit - varë§Œ ê°€ëŠ¥, primitive íƒ€ì… ë¶ˆê°€
lateinit var viewModel: MyViewModel

// lazy - valë§Œ ê°€ëŠ¥, ì²˜ìŒ ì ‘ê·¼ ì‹œ ì´ˆê¸°í™”
val repository: Repository by lazy {
    RepositoryImpl()
}
```

**3. íƒ€ì… ë³€í™˜**

```kotlin
// Kotlinì€ ì•”ì‹œì  íƒ€ì… ë³€í™˜ì´ ì—†ìŒ
val i: Int = 10
// val l: Long = i  // ERROR

// ëª…ì‹œì  ë³€í™˜ í•„ìš”
val l: Long = i.toLong()

// ì•ˆì „í•œ ë³€í™˜
val str = "123"
val num: Int? = str.toIntOrNull()  // ì‹¤íŒ¨í•˜ë©´ null
```

**4. Nothing íƒ€ì…**

```kotlin
// Nothingì€ ì ˆëŒ€ ë°˜í™˜í•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ì˜ íƒ€ì…
fun fail(message: String): Nothing {
    throw IllegalStateException(message)
}

// í™œìš© ì˜ˆ
val name: String = getName() ?: fail("Name is null")
```

## ğŸ’» ì‹¤ì „ ì˜ˆì œ

### ì•ˆë“œë¡œì´ë“œì—ì„œì˜ í™œìš©

```kotlin
class UserRepository {
    // ë¶ˆë³€ ë¦¬ìŠ¤íŠ¸ ë…¸ì¶œ
    private val _users = mutableListOf<User>()
    val users: List<User> get() = _users.toList()
    
    // StateFlow - ë¶ˆë³€ì„± ë³´ì¥
    private val _uiState = MutableStateFlow<UiState>(UiState.Loading)
    val uiState: StateFlow<UiState> = _uiState.asStateFlow()
    
    fun addUser(user: User) {
        _users.add(user)
        _uiState.value = UiState.Success(_users.toList())
    }
}
```

### ìŠ¤ë§ˆíŠ¸ ìºìŠ¤íŠ¸

```kotlin
fun processValue(value: Any) {
    if (value is String) {
        // ìë™ìœ¼ë¡œ Stringìœ¼ë¡œ ìºìŠ¤íŒ…
        println(value.length)
    }
}

// varëŠ” ìŠ¤ë§ˆíŠ¸ ìºìŠ¤íŠ¸ ì•ˆ ë  ìˆ˜ ìˆìŒ
var value: Any = "Hello"
if (value is String) {
    Thread {
        // value = 123  // ë‹¤ë¥¸ ìŠ¤ë ˆë“œì—ì„œ ë³€ê²½ ê°€ëŠ¥
    }.start()
    // println(value.length)  // ERROR - ìŠ¤ë§ˆíŠ¸ ìºìŠ¤íŠ¸ ë¶ˆê°€
}

// valì€ ì•ˆì „
val value2: Any = "Hello"
if (value2 is String) {
    println(value2.length)  // OK - ìŠ¤ë§ˆíŠ¸ ìºìŠ¤íŠ¸ ì‘ë™
}
```

### Null ì•ˆì „ì„±

```kotlin
// Non-null íƒ€ì…
val name: String = "ë¯¼íŠ¸"
// name = null  // ERROR

// Nullable íƒ€ì…
val nullableName: String? = null

// Safe call
val length = nullableName?.length  // nullì´ë©´ null ë°˜í™˜

// Elvis ì—°ì‚°ì
val length2 = nullableName?.length ?: 0  // nullì´ë©´ 0

// Non-null assertion (ìœ„í—˜)
val length3 = nullableName!!.length  // nullì´ë©´ NPE
```

## ğŸ”— ê´€ë ¨ ê°œë…

- [[01-Kotlin/ê¸°ë³¸ë¬¸ë²•/Nullableê³¼-Null-Safety|Nullableê³¼ Null Safety]]
- [[01-Kotlin/ê¸°ë³¸ë¬¸ë²•/í”„ë¡œí¼í‹°ì™€-í•„ë“œ|í”„ë¡œí¼í‹°ì™€ í•„ë“œ]]
- [[01-Kotlin/ìœ„ì„/Lazy|Lazy ìœ„ì„]]
- [[02-Coroutines/Flow/StateFlow|StateFlow]]

## ğŸ“š ë” ë³´ê¸°

- [Kotlin Docs - Basic Types](https://kotlinlang.org/docs/basic-types.html)
- [Kotlin Docs - Properties](https://kotlinlang.org/docs/properties.html)

---

**í•µì‹¬ ìš”ì•½:**
- val ìš°ì„ , varëŠ” ê¼­ í•„ìš”í•  ë•Œë§Œ
- íƒ€ì… ì¶”ë¡  í™œìš©í•˜ë˜, public APIëŠ” ëª…ì‹œì  íƒ€ì… ì‘ì„±
- valë„ ê°ì²´ ë‚´ë¶€ ìƒíƒœëŠ” ë³€ê²½ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì  ì£¼ì˜
- ë¶ˆë³€ì„±ì€ ë™ì‹œì„± ì•ˆì „ì„±ê³¼ ì§ê²°
